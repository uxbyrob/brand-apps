!function($){function e(e,i){this.element=e,this._defaults={"button-style":"btn-default","field-size":"","container-class":"","max-visible-items":0,"filter-type":"","filter-start-from":1,"filter-case-sensitive":!1},this.settings=$.extend({},this._defaults,i),this._name=t,this._option_values=[],this._currently_selected_option=0,this._currently_highlighted_option=0,this._options_container_height=0,this._options_container_spacing=0,this._option_height=0,this._max_height=0,this._currently_from_top=0,this.init()}var t="bootstrapSelect";e.prototype={init:function(){var e=this,t=new Array("primary","info","success","warning","danger","default"),i=new Array("lg","sm"),n=new Array("begins","contains");$.inArray(e.settings["button-style"].replace("btn-",""),t)<0&&(e.settings["button-style"]=""),$.inArray(e.settings["field-size"].replace("input-",""),i)<0&&(e.settings["field-size"]=""),$.inArray(e.settings["filter-type"],n)<0&&(e.settings["filter-type"]=""),e.settings["container-size"]="",e.settings["field-size"]>""&&(e.settings["container-size"]=e.settings["field-size"].replace("input-",""));var s=$(e.element).find("option"),o=$(e.element).attr("name"),l="";$(e.element.attributes).each(function(){var e=this.nodeValue;void 0!==e&&e!==!1&&"name"!==this.nodeName&&"class"!==this.nodeName&&(l=l+" "+this.nodeName+'="'+e+'"')});var a="";e.settings["container-size"]>""&&(a="bootstrap-"+e.settings["container-size"]),e.generatedSelect=$('<div class="bootstrap-select input-group '+e.settings["container-class"]+" "+a+'"></div>'),e.generatedSelect.append('<input type="text" autocomplete="off" name="'+o+'_label" class="form-control '+e.settings["field-size"]+'" '+l+"/>"),e.generatedSelect.append('<input type="hidden" name="'+o+'" />'),e.generatedSelect.append('<div class="input-group-btn "></div>'),e.generatedSelect.find(".input-group-btn").append('<button tabindex="-1" type="button" class="btn '+e.settings["button-style"]+' dropdown-toggle"><span class="ihs-icon-chevron"></span></button>'),e.generatedSelect.find(".input-group-btn").append('<ul tabindex="-1" class="dropdown-menu '+e.settings["button-style"].replace("btn-","")+'"></ul>');var r="";s.each(function(){r=$(this).prop("disabled")?'class="disabled"':"",e.generatedSelect.find("ul").append("<li "+r+'><a tabindex="-1" href="'+$(this).val()+'">'+$(this).html()+"</a></li>"),$(this).is(":selected")&&e.set_value($(this).val()),e._option_values.push([$(this).html(),$(this).val(),!0])}),$(e.element).replaceWith(e.generatedSelect),e.generatedSelect.on("click",".dropdown-menu li a",function(t){t.preventDefault(),$(this).closest("li").hasClass("disabled")||(e.close(),e.set_value($(this).attr("href")))}),e.generatedSelect.find('input[type="text"]').bind("focus",function(){e.open(),e.settings["filter-type"]>""&&e.show_all_options()}),e.generatedSelect.find("button").bind("click",function(t){e.is_open()?e.close():$(this).hasClass("disabled")||e.generatedSelect.find('input[type="text"]').focus()}),e.settings["filter-type"]>""&&(e.generatedSelect.find('input[type="text"]').bind("keyup",function(t){var i=[9,13,38,40];if(-1===i.indexOf(t.keyCode)){var n=$(this).val();n.length>=e.settings["filter-start-from"]?(e.highlight_value(""),e.generatedSelect.find("a").each(function(){""===$(this).html()?($(this).closest("li").show(),e._option_values[e.generatedSelect.find("li").index($(this).closest("li"))][2]=!0):e[e.settings["filter-type"]]($(this).html(),n)?($(this).closest("li").show(),e._option_values[e.generatedSelect.find("li").index($(this).closest("li"))][2]=!0):($(this).closest("li").hide(),e._option_values[e.generatedSelect.find("li").index($(this).closest("li"))][2]=!1)})):e.show_all_options()}}),e.generatedSelect.find('input[type="text"]').bind("blur",function(t){e.set_value(e._option_values[e._currently_selected_option][1])})),e.generatedSelect.find("button").bind("blur",function(t){e.close()}),e.generatedSelect.find('input[type="text"]').bind("paste keydown",function(t){if(38==t.keyCode)if(e.settings["filter-type"]>"")for(var i=!1;!i;){var n=(e._option_values.length+(e._currently_highlighted_option-1))%e._option_values.length;e.highlight_value(e._option_values[n][1]),e._option_values[n][2]&&(i=!0)}else e._currently_selected_option=(e._option_values.length+(e._currently_selected_option-1))%e._option_values.length,e.set_value(e._option_values[e._currently_selected_option][1]);else if(40==t.keyCode)if(e.settings["filter-type"]>"")for(var i=!1;!i;){var n=(e._currently_highlighted_option+1)%e._option_values.length;e.highlight_value(e._option_values[n][1]),e._option_values[n][2]&&(i=!0)}else e._currently_selected_option=(e._currently_selected_option+1)%e._option_values.length,e.set_value(e._option_values[e._currently_selected_option][1]);else if(13==t.keyCode)e.settings["filter-type"]>""&&e.set_value(e.generatedSelect.find("li.active a").attr("href")),e.close(),e.generatedSelect.find('input[type="text"]').blur();else if(9===t.keyCode)e.close();else if(9!==t.keyCode&&""===e.settings["filter-type"]){t.preventDefault();for(var s=String.fromCharCode(t.keyCode),o=!1,l=e._currently_selected_option;!o;)l=(l+1)%e._option_values.length,l===e._currently_selected_option?o=!0:e._option_values[l][0][0]===s&&(o=!0);e.set_value(e._option_values[l][1])}}),$("html").bind("click",function(t){var i=$(e.generatedSelect).find('input[type="text"]'),n=$(e.generatedSelect).find(".dropdown-menu li a"),s=$(e.generatedSelect).find("button"),o=$(e.generatedSelect).find("button span");$(t.target).is(i)||$(t.target).is(n)||$(t.target).is(s)||$(t.target).is(o)||e.close()})},highlight_value:function(e){var t=$(this.generatedSelect).find('.dropdown-menu li a[href="'+e+'"]').closest("li");if($(this.generatedSelect).find(".dropdown-menu li").removeClass("active"),t.addClass("active"),this._currently_highlighted_option=$(this.generatedSelect).find("li").index(t),this._max_height>0){for(var i=0,n=0;n<this._currently_highlighted_option;n++)this._option_values[n][2]&&i++;var s=i*this._option_height;(s<this._currently_from_top||s>=this._currently_from_top+this._max_height-this._options_container_spacing)&&($(this.generatedSelect).find(".dropdown-menu").scrollTop(s),this._currently_from_top=s)}},show_all_options:function(){this.generatedSelect.find("li").show();for(var e=0;e<this._option_values.length;e++)this._option_values[e][2]=!0},set_value:function(e){var t=$(this.generatedSelect).find('.dropdown-menu li a[href="'+e+'"]').closest("li"),i=this.get_value();this._currently_selected_option=$(this.generatedSelect).find("li").index(t),this.highlight_value(e),$(this.generatedSelect).find('input[type="text"]').val(t.find("a").html()),$(this.generatedSelect).find('input[type="hidden"]').val(e),i!==e&&$(this.generatedSelect).find('input[type="text"]').change()},get_value:function(){return $(this.generatedSelect).find('.dropdown-menu li[class*="active"]').find("a").attr("href")},close:function(){$(this.generatedSelect).find(".input-group-btn").removeClass("open").removeClass("dropup"),$(this.generatedSelect).find(".input-group-btn button").removeClass("active")},open:function(){if($(this.generatedSelect).find(".input-group-btn").addClass("open"),$(this.generatedSelect).find(".input-group-btn button").addClass("active"),0===this._options_container_height&&(this._options_container_height=$(this.generatedSelect).find("ul").outerHeight(!0),this._options_container_spacing=this._options_container_height-$(this.generatedSelect).find("ul").height(),this._option_height=$(this.generatedSelect).find("li").outerHeight(!0)),this.settings["max-visible-items"]>0&&0===this._max_height){this._max_height=this.settings["max-visible-items"]*this._option_height+this._options_container_spacing,$(this.generatedSelect).find("ul").css("max-height",this._max_height),this._options_container_height=this._max_height;var e=this._currently_selected_option*this._option_height+this._options_container_spacing/2;e>=this._options_container_height&&$(this.generatedSelect).find("ul").scrollTop(e-this._options_container_spacing/2)}this._options_container_height>=$(document).height()-$(this.generatedSelect).find("ul").offset().top&&$(this.generatedSelect).find(".input-group-btn").addClass("dropup")},is_open:function(){return $(this.generatedSelect).find(".input-group-btn").hasClass("open")},disable:function(){$(this.generatedSelect).find('input[type="text"]').attr("disabled","disabled"),$(this.generatedSelect).find("button").addClass("disabled"),this.close()},enable:function(){$(this.generatedSelect).find('input[type="text"]').removeAttr("disabled"),$(this.generatedSelect).find("button").removeClass("disabled")},is_disabled:function(){return $(this.generatedSelect).find("button").hasClass("disabled")},begins:function(e,t){return this.settings["filter-case-sensitive"]?0===e.indexOf(t):0===e.toLowerCase().indexOf(t.toLowerCase())},contains:function(e,t){return this.settings["filter-case-sensitive"]?e.indexOf(t)>=0:e.toLowerCase().indexOf(t.toLowerCase())>=0},add_option:function(e,t,i){"undefined"!=typeof i?i>0&&($('<li><a tabindex="-1" href="'+e+'">'+t+"</a></li>").insertAfter($(this.generatedSelect).find(".dropdown-menu li:nth-child("+i+")")),this._option_values.splice(i,0,[t,e,!0]),i<=this._currently_selected_option&&this._currently_selected_option++,i<=this._currently_highlighted_option&&(this._currently_highlighted_option++,this._currently_from_top=this._currently_from_to+this._option_height)):($(this.generatedSelect).find(".dropdown-menu").append($('<li><a href="'+e+'">'+t+"</a></li>")),this._option_values.push([t,e,!0]))},remove_option:function(e){$(this.generatedSelect).find(".dropdown-menu li:nth-child("+(e+1)+")").remove(),this._option_values.splice(e,1),e===this._currently_selected_option?this.set_value(""):e<this._currently_selected_option&&this._currently_selected_option--,e===this._currently_highlighted_option?this.highlight_value(""):e<this._currently_highlighted_option&&(this._currently_highlighted_option--,this._currently_from_top=this._currently_from_to-this._option_height)},disable_option:function(e){var t=$(this.generatedSelect).find(".dropdown-menu li:nth-child("+(e+1)+")");this.get_value()===t.find("a").attr("href")&&this.set_value(""),$(this.generatedSelect).find(".dropdown-menu li:nth-child("+(e+1)+")").addClass("disabled")},enable_option:function(e){$(this.generatedSelect).find(".dropdown-menu li:nth-child("+(e+1)+")").removeClass("disabled")},is_option_disabled:function(e){return $(this.generatedSelect).find(".dropdown-menu li:nth-child("+(e+1)+")").hasClass("disabled")}},$.fn[t]=function(i){return this.each(function(){$.data(this,"plugin_"+t)||$.data(this,"plugin_"+t,new e(this,i))})}}(jQuery);